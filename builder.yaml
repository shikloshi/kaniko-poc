apiVersion: batch/v1
kind: Job
metadata:
  name: kaniko
spec:
    template:
        spec:
          restartPolicy: Never
          containers:
          - name: kaniko
            image: gcr.io/kaniko-project/executor:latest
            args: ["--dockerfile=kaniko-poc/Dockerfile",
                    "--context=git://github.com/shikloshi/kaniko-poc.git#/refs/heads/master",
                    "--destination=shikloshi/kaniko-poc:1.0"] # replace with your dockerhub account
    #volumeMounts:
      #- name: kaniko-secret
        #mountPath: /kaniko/.docker
      #- name: dockerfile-storage
        #mountPath: /workspace
        #
  #volumes:
    #- name: kaniko-secret
      #secret:
        #secretName: regcred
        #items:
          #- key: .dockerconfigjson
            #path: config.json
    #- name: dockerfile-storage
      #persistentVolumeClaim:
        #claimName: dockerfile-claim

